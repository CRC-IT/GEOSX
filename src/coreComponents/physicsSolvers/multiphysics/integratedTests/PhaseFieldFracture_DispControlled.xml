<Problem>

  <Solvers>
    <PhaseFieldFracture name="PhaseFieldSolve"
                 solidSolverName="SolidMechSolve"
                 damageSolverName="DamageSolve"
                 couplingTypeOption="FixedStress"
                 logLevel="2"
                 discretization="FE1"
                 targetRegions="{Region1}">
<<<<<<< HEAD
      <SystemSolverParameters maxIterNewton="2"
=======
      <SystemSolverParameters maxIterNewton="400"
>>>>>>> 589a94499291b437a0af5b9946e763146dd5ecf7
                              logLevel="2"/>
    </PhaseFieldFracture>

    <SolidMechanicsLagrangianSSLE name="SolidMechSolve"
                                  timeIntegrationOption="QuasiStatic"
                                  logLevel="1"
                                  discretization="FE1"
                                  targetRegions="{Region1}"
                                  solidMaterialName="shale"
                                  >
      <SystemSolverParameters krylovTol="1.0e-10"
<<<<<<< HEAD
                              newtonTol="1.0e-6"
                              maxIterNewton="50"
=======
                              newtonTol="1.0e-12"
                              maxIterNewton="5"
>>>>>>> 589a94499291b437a0af5b9946e763146dd5ecf7
                              logLevel="0"/>
    </SolidMechanicsLagrangianSSLE>

    <PhaseFieldDamageFEM name="DamageSolve"
                discretization="FE1"
                timeIntegrationOption="SteadyState"
                fieldName="Damage"
                solidMaterialName="shale"
                localDissipation = "Linear"
                logLevel="1"
                targetRegions="{Region1}">
    </PhaseFieldDamageFEM>
  </Solvers>

  <Mesh>
    <InternalMesh name="mesh1"
                  elementTypes="{C3D8}"
                  xCoords="{-1, 1}"
                  yCoords="{-1, 1}"
                  zCoords="{-1, 1}"
                  nx="{30}"
                  ny="{30}"
                  nz="{1}"
                  cellBlockNames="{cb1}"/>
  </Mesh>

<<<<<<< HEAD
  <Events maxTime="500.0">
=======
  <Events maxTime="1.0">
>>>>>>> 589a94499291b437a0af5b9946e763146dd5ecf7
    <!-- This event is applied every cycle, and overrides the
    solver time-step request -->
    <PeriodicEvent name="solverApplications"
                   forceDt="1.0"
                   target="/Solvers/PhaseFieldSolve" />

    <!-- This event is applied every 1.0s.  The targetExactTimestep
    flag allows this event to request a dt modification to match an
    integer multiple of the timeFrequency. -->
    <PeriodicEvent name="vtkOutput"
                   timeFrequency="1.0"
                   targetExactTimestep="1"
                   target="/Outputs/PFCrack_VTKOutput" />

    <PeriodicEvent name="siloOutputs"
                   timeFrequency="1.0"
                   targetExactTimestep="1"
                   target="/Outputs/SiloOutput"/>

    <PeriodicEvent name="restarts"
                   timeFrequency="1e99"
                   targetExactTimestep="0"
                   target="/Outputs/restartOutput"
                   endTime="-1" />
  </Events>

  <NumericalMethods>
    <BasisFunctions>
      <LagrangeBasis3 name="linearBasis"  degree = "1"  />
    </BasisFunctions>
    <QuadratureRules>
      <GaussQuadrature3 name="gaussian"   degree="2"  />
    </QuadratureRules>
    <FiniteElements>
      <FiniteElementSpace name="FE1" parentSpace="C3D8" basis="linearBasis" quadrature="gaussian" />
    </FiniteElements>
  </NumericalMethods>

  <ElementRegions>
    <CellElementRegion name="Region1" cellBlocks="{cb1}" materialList="{shale}" />
  </ElementRegions>

  <Constitutive>
    <LinearElasticIsotropic name="shale"
                            defaultDensity="2700"
                            defaultBulkModulus="1.7550e5"
                            defaultShearModulus="8.077e4"/>
  </Constitutive>

  <FieldSpecifications>
    <!--<FieldSpecification name="boundary"
                        fieldName="Temperature"
                        objectPath="nodeManager"
                        scale="0"
                        setNames="{xneg, xpos, yneg, ypos, zneg, zpos}"/> -->
    <FieldSpecification name="xpos"
               objectPath="nodeManager"
               fieldName="TotalDisplacement"
               component="0"
               scale="2.0e-5"
               functionName="f_b"
               setNames="{xpos}"/>

    <FieldSpecification name="xneg"
               objectPath="nodeManager"
               fieldName="TotalDisplacement"
               component="0"
               scale="0"
               functionName="f_b"
               setNames="{xneg}"/>

    <!-- <FieldSpecification name="xconstraint1"
               objectPath="nodeManager"
               fieldName="TotalDisplacement"
               component="0"
               scale="0.0000010"
               functionName="f_b"
               setNames="{xpos}"/> -->

    <FieldSpecification name="yconstraint"
               objectPath="nodeManager"
               fieldName="TotalDisplacement"
               component="1"
               scale="0.0"
               setNames="{xneg}"/>

    <FieldSpecification name="zconstraint"
               objectPath="nodeManager"
               fieldName="TotalDisplacement"
               component="2"
               scale="0.0"
               setNames="{xneg}"/>

    <FieldSpecification name="pointSource"
                        fieldName="Damage"
                        initialCondition="0"
                        objectPath="nodeManager"
                        scale="1"
                        setNames="{centerLine}"/>

    <!-- <FieldSpecification name="diffusionCoeff"
                        initialCondition="1"
                        setNames="{all}"
                        objectPath="ElementRegions"
                        fieldName="coeffField"
                        scale="2e3"
                        functionName="f_b"
                        /> -->
  </FieldSpecifications>


  <Functions>
    <!-- These are example mathpresso functions.  In order to use them, you need to specify the order that the
    symbolic math function should expect the variables to be given, and an expression that it will compile.
    A list of available functions is given here: https://github.com/kobalicek/mathpresso -->
    <SymbolicFunction name="f_b"
                      inputVarNames="{time}"
                      variableNames="{t}"
                      expression="t-0.5"/>

  </Functions>
  <Outputs>
    <Silo name="SiloOutput" parallelThreads="1" plotFileRoot="plot"/>
    <VTK name="PFCrack_VTKOutput" parallelThreads="1" plotFileRoot="plot"/>
    <Restart name="restartOutput"/>
  </Outputs>

  <Geometry>
    <Box name="centerLine" xMin="-0.001, -1.001, -1.001" xMax="+0.001, +0.001, +1.001"/>
  </Geometry>

</Problem>
